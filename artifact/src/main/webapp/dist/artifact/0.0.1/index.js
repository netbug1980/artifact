!function(e){function t(n){if(a[n])return a[n].exports;var r=a[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){e.exports=a(22)},function(e,t){"use strict";function a(e){var t=this;return this.defaults={text:"",help:"",clazz:"alert-success",closable:!0,selfClosing:!0,callback:function(){}},this.options=$.extend({},this.defaults,e),this.$alert=$('<div class="alert alert-dismissible fade in" role="alert">').appendTo($(".layout-message")),this.$alert.addClass(e.clazz),this.options.closable&&$('<button type="button" class="close" data-dismiss="alert" aria-label="Close">				<span aria-hidden="true">&times;</span>		</button>').appendTo(this.$alert),this.$alert.append(this.options.text),this.options.closable&&this.options.selfClosing&&setTimeout(function(){t.$alert.alert("close")},3e3),this}e.exports={_buildOpt:function(e){if("string"==typeof e){var t={};t.text=e,e=t}return e},success:function(e){return e=this._buildOpt(e),e.clazz="alert-success",new a(e)},info:function(e){return e=this._buildOpt(e),e.clazz="alert-info",new a(e)},warning:function(e){return e=this._buildOpt(e),e.clazz="alert-warning",new a(e)},confirm:function(e){e=this._buildOpt(e),e.clazz="alert-warning",e.title=e.text,e.text="";var t=new a(e);$("<h4>").html(e.title).appendTo(t.$alert),e.help&&$("<p>").html(e.help).appendTo(t.$alert);var n=$('<p style="text-align: right;">').appendTo(t.$alert);return $('<button type="button" class="btn btn-default">\u53d6\u6d88</button>').appendTo(n).click(function(){t.$alert.alert("close")}),$('<button type="button" class="btn btn-warning">\u786e\u5b9a</button>').appendTo(n).click(function(){t.$alert.alert("close"),e.callback()}),t},danger:function(e){return e=this._buildOpt(e),e.clazz="alert-danger",new a(e)}}},function(e,t,a){"use strict";e.exports=a(13)},function(e,t,a){"use strict";var n=a(4);e.exports={getOrg:function(e,t){new n({url:"/api/security/organization/get/"+e,type:"GET"}).done(t)},deleteOrg:function(e,t){new n({url:"/api/security/organization/delete/"+e,type:"DELETE"}).done(t)},saveOrUpdateOrg:function(e,t){new n({url:"/api/security/organization/saveorupdate",type:"POST",data:JSON.stringify(e)}).done(t)},deleteUser:function(e,t){new n({url:"/api/security/user/delete/"+e,type:"DELETE"}).done(t)}}},function(e,t,a){"use strict";a(18),window.AJAX_PROXY={project:"/artifact",ajaxStack:new Array,ajaxMap:new Object},e.exports=function(e){function t(e){var t={url:e.url,type:e.type,data:e.data};return $.md5(JSON.stringify(t))}var n=$.Deferred();this.defaults={url:"",type:"POST",async:!0,cache:!1,contentType:"application/json; charset=UTF-8",dataType:"json",timeout:2e4,data:null,$loadingContainer:$(".layout-message")},this.options=$.extend({},this.defaults,e);var r=this;this.key=t(this.options);var o=r.options.$loadingContainer;a(21);var i=o.getUID("loading");return this.options.url=AJAX_PROXY.project+this.options.url,this.options.xhr=function(){var e=null;window.ActiveXObject?e=new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest&&(e=new XMLHttpRequest),a(17),o.Loading(i);var t=21,n=null,s=null,l=null;return e.onreadystatechange=function(){switch(e.readyState){case 0:o.progress(i,"0%");break;case 1:o.progress(i,"20%"),n=setInterval(function(){o.progress(i,t+"%"),t+=1},parseInt(r.options.timeout/60)),s=setTimeout(function(){o.warning(i)},parseInt(.8*r.options.timeout)),l=setTimeout(function(){window.clearInterval(n)},r.options.timeout);break;case 2:window.clearInterval(n),window.clearTimeout(s),window.clearTimeout(l),o.progress(i,"80%");break;case 3:o.progress(i,"90%");break;case 4:o.progress(i,"100%")}},e},this.options.complete=function(e,t){setTimeout(function(){delete AJAX_PROXY.ajaxMap[r.key],o.removeLoading(i)},600)},this.options.success=function(e){switch(o.success(i),e.code){case-1:a(1).danger(e.message);break;case-22:AJAX_PROXY.ajaxStack.push(r),a(1).danger(e.message+'<a href="#" class="alert-link margin-left-15" onclick="Login();">\u70b9\u51fb\u767b\u9646</a>');break;case-30:AJAX_PROXY.ajaxStack.push(r),a(1).danger(e.message+'<a href="#" class="alert-link margin-left-15" onclick="Login();">\u70b9\u51fb\u91cd\u65b0\u767b\u9646</a>');break;case-31:a(1).danger(e.message+'<a href="#" class="alert-link margin-left-15" onclick="Login();">\u70b9\u51fb\u91cd\u65b0\u767b\u9646</a>');break;case-40:a(1).danger(e.message);break;case-41:a(1).danger(e.message);break;default:try{n.resolve(e)}catch(t){console.error(t)}}},this.options.error=function(e,t,r){switch(o.danger(i),t){case null:r=""==r?"jQuery.ajax\u8fd4\u56de\u7684\u9519\u8bef\u72b6\u6001\u503c\u662fnull\uff0c\u6211\u4eec\u4e5f\u4e0d\u77e5\u9053\u53d1\u751f\u4e86\u4ec0\u4e48":r,a(1).danger("\u51fa\u9519\u5566:"+r);break;case"timeout":a(1).danger("\u554a\u54e6\uff0c\u8fde\u63a5\u8d85\u65f6\u5566\uff0c\u5446\u4f1a\u518d\u8bd5\u8bd5\u5427");break;case"error":"Not Found"===r||"Internal Server Error"===r||(0===e.readyState?a(1).danger("\u8bf7\u6c42\u6ca1\u6210\u529f\uff0c\u53ef\u80fd\u7684\u9519\u8bef\u6709\uff1a1.\u5931\u53bb\u7f51\u7edc\u8fde\u63a5,2.\u57df\u540d\u89e3\u6790\u9519\u8bef\u5566,3.\u8de8\u57df\u8bbf\u95ee\u4e86,4.\u8bf7\u6c42\u5efa\u7acb\u8d85\u65f6\u4e86"):(r=""==r?"sorry, jQuery\u4e5f\u6ca1\u6709\u7ed9\u63d0\u793a\u4fe1\u606f":r,a(1).danger("\u51fa\u73b0\u4e86\u672a\u77e5\u9519\u8bef:"+r)));break;case"abort":a(1).warning("\u5ba2\u6237\u7aef\u53d6\u6d88");break;case"parsererror":a(1).danger("\u554a\u54e6\uff0c\u8fd4\u56de\u7684\u6570\u636e\u89e3\u6790\u4e0d\u4e86\u5566\uff0c\u627e\u7a0b\u5e8f\u5458\u5427")}n.reject()},this.start=function(){return AJAX_PROXY.ajaxMap[r.key]?void a(1).info("\u8bf7\u52ff\u91cd\u590d\u8bf7\u6c42"):(AJAX_PROXY.ajaxMap[r.key]=r,void $.ajax(r.options))},this.start(),n.promise()},$.ajaxSetup({beforeSend:function(e,t){var a=sessionStorage.currentSession;if(a){a=JSON.parse(a);var n=a.CSRF_TOKEN;n&&e.setRequestHeader(n.headerName,n.token);var r=a.CUR_USER;r&&(e.setRequestHeader("userID",r.id),e.setRequestHeader("userName",encodeURIComponent(r.name)),e.setRequestHeader("userAccount",encodeURIComponent(r.account))),e.setRequestHeader("Accept","application/json")}return!0},statusCode:{403:function(){a(1).danger("\u4f1a\u8bdd\u8fc7\u671f\u5566\uff0c\u8981\u91cd\u65b0\u767b\u5f55\u54e6")},404:function(){a(1).danger("\u540e\u53f0\u8bf7\u6c42\u7684\u5730\u5740\u4e0d\u5bf9\u54e6")},500:function(){a(1).danger("\u540e\u53f0\u670d\u52a1\u51fa\u9519\u5566\uff0c\u8054\u7cfb\u7f51\u7edc\u8fd0\u7ef4\u4eba\u5458\u5427")}}})},function(e,t,a){"use strict";function n(e,t){this.helpers=e||{},this.partials=t||{},r(this)}function r(e){e.registerHelper("helperMissing",function(e){if(2===arguments.length)return void 0;throw new s("Missing helper: '"+e+"'")}),e.registerHelper("blockHelperMissing",function(t,a){var n=a.inverse||function(){},r=a.fn;return p(t)&&(t=t.call(this)),t===!0?r(this):t===!1||null==t?n(this):u(t)?t.length>0?e.helpers.each(t,a):n(this):r(t)}),e.registerHelper("each",function(e,t){var a,n=t.fn,r=t.inverse,o=0,i="";if(p(e)&&(e=e.call(this)),t.data&&(a=g(t.data)),e&&"object"==typeof e)if(u(e))for(var s=e.length;s>o;o++)a&&(a.index=o,a.first=0===o,a.last=o===e.length-1),i+=n(e[o],{data:a});else for(var l in e)e.hasOwnProperty(l)&&(a&&(a.key=l,a.index=o,a.first=0===o),i+=n(e[l],{data:a}),o++);return 0===o&&(i=r(this)),i}),e.registerHelper("if",function(e,t){return p(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||i.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,a){return e.helpers["if"].call(this,t,{fn:a.inverse,inverse:a.fn,hash:a.hash})}),e.registerHelper("with",function(e,t){return p(e)&&(e=e.call(this)),i.isEmpty(e)?void 0:t.fn(e)}),e.registerHelper("log",function(t,a){var n=a.data&&null!=a.data.level?parseInt(a.data.level,10):1;e.log(n,t)})}function o(e,t){v.log(e,t)}var i=a(7),s=a(6)["default"],l="1.3.0";t.VERSION=l;var c=4;t.COMPILER_REVISION=c;var d={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};t.REVISION_CHANGES=d;var u=i.isArray,p=i.isFunction,h=i.toString,f="[object Object]";t.HandlebarsEnvironment=n,n.prototype={constructor:n,logger:v,log:o,registerHelper:function(e,t,a){if(h.call(e)===f){if(a||t)throw new s("Arg not supported with multiple helpers");i.extend(this.helpers,e)}else a&&(t.not=a),this.helpers[e]=t},registerPartial:function(e,t){h.call(e)===f?i.extend(this.partials,e):this.partials[e]=t}};var v={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(e,t){if(v.level<=e){var a=v.methodMap[e];"undefined"!=typeof console&&console[a]&&console[a].call(console,t)}}};t.logger=v,t.log=o;var g=function(e){var t={};return i.extend(t,e),t};t.createFrame=g},function(e,t){"use strict";function a(e,t){var a;t&&t.firstLine&&(a=t.firstLine,e+=" - "+a+":"+t.firstColumn);for(var r=Error.prototype.constructor.call(this,e),o=0;o<n.length;o++)this[n[o]]=r[n[o]];a&&(this.lineNumber=a,this.column=t.firstColumn)}var n=["description","fileName","lineNumber","message","name","number","stack"];a.prototype=new Error,t["default"]=a},function(e,t,a){"use strict";function n(e){return l[e]||"&amp;"}function r(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}function o(e){return e instanceof s?e.toString():e||0===e?(e=""+e,d.test(e)?e.replace(c,n):e):""}function i(e){return e||0===e?h(e)&&0===e.length?!0:!1:!0}var s=a(9)["default"],l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},c=/[&<>"'`]/g,d=/[&<>"'`]/;t.extend=r;var u=Object.prototype.toString;t.toString=u;var p=function(e){return"function"==typeof e};p(/x/)&&(p=function(e){return"function"==typeof e&&"[object Function]"===u.call(e)});var p;t.isFunction=p;var h=Array.isArray||function(e){return e&&"object"==typeof e?"[object Array]"===u.call(e):!1};t.isArray=h,t.escapeExpression=o,t.isEmpty=i},function(e,t){"use strict";e.exports=function(e){var t=this;if(this.defaults={hasHeader:!0,hasTitle:!0,hasBtnGroup:!0},this.options=$.extend({},this.defaults,e),this.parent=null,this.$content=$('<div class="content">').appendTo(".layout-container"),this.$content.prev().length>0?this.parent=this.$content.prev().data("content"):this.$content.addClass("in"),this.options.hasHeader){var a=$('<div class="content-header">').appendTo(this.$content);this.$header=a,this.options.hasTitle&&$('<span class="title">').appendTo(a),this.options.hasBtnGroup&&$('<div role="group" class="btn-group pull-right">').appendTo(a)}return this.$container=$('<div class="content-container">').appendTo(this.$content),this.slipIn=function(){t.$content.removeClass("in out"),t.$content.addClass("in"),$(".layout-container").find(".content").length>1&&(Layout.Backer.Stack.push({callback:function(){t.slipOut(!0)},type:Layout.Backer.Type.CONTENT}),$("#btn_nav_back").removeClass("invisible"))},this.slipOut=function(e){t.$content.removeClass("in out"),t.$content.addClass("out"),setTimeout(function(){e||Layout.Backer.clickFun(!1),t.$content.remove()},350)},this.$content.data("content",t),this}},function(e,t){"use strict";function a(e){this.string=e}a.prototype.toString=function(){return""+this.string},t["default"]=a},function(e,t,a){"use strict";var n=a(4);e.exports={login:function(e,t){new n({url:"/login",type:"POST",data:JSON.stringify(e)}).done(function(e){switch(e.code){case 0:var a=e.result.CUR_USER,n=new Array,r=new Array,o=new Object;$(a.userRoleList).each(function(e,t){var a=t.role;n.push(a.name),$(a.rolePermissionList).each(function(e,t){o[t.permission.path]=""})});for(var i in o)r.push(i);for(e.result.CUR_USER.roleNameArr=n,e.result.CUR_USER.permissionPathArr=r,sessionStorage.currentSession=JSON.stringify(e.result);AJAX_PROXY.ajaxStack.length>0;)AJAX_PROXY.ajaxStack.pop().start();default:t(e)}})},logout:function(e){new n({url:"/logout",type:"POST"}).done(e)}}},function(e,t,a){"use strict";function n(){}a(19);var r=a(4),o=a(1);n.selectPopover=function(e){var t={$btn:$("button"),checkedArr:[],callback:function(e){console.log(e)}},e=$.extend({},t,e);e.$btn.MyPopover({checkedArr:e.checkedArr,callback:function(t){var a=t.$tip.find(".popover-content-content");new r({url:"/api/security/role/search",type:"POST",$loadingContainer:a,data:JSON.stringify({})}).done(function(e){t.defaultRender(e.result)});var n=t.$tip.find(".popover-content-footer .btn-ok");n.click(function(){var a=t.defaultGetData();a&&a.length>0?(e.callback(a),t.destroy()):o.warning("\u8bf7\u9009\u62e9\u89d2\u8272")})}})},n.buildTr=function(e){var t=a(30);return t({data:e})},e.exports=n},function(e,t,a){"use strict";var n=a(8),r=a(4);a(20);var o=a(1),i=a(25);e.exports=function(e){var t=this;n.apply(this,arguments);var s=e.id,l=e.verifypw,c="\u65b0\u589e";s&&(c="\u7f16\u8f91"),this.$header.find(".title").text(c+"\u7528\u6237"),this.randerRoleTr=function(e){var n=a(11).buildTr(e),r=t.$container.find(".panel-role tbody");r.empty(),r.append(n),r.find(".btn-group").Buttons([{clazz:"btn-danger",glyphicon:"glyphicon-remove",text:"\u5220\u9664",title:"\u4e34\u65f6\u5220\u9664",callback:function(){$(this).closest("tr").remove()}}])},this.getRoleIds=function(){return t.$container.find(".panel-role tbody a").map(function(){return $(this).attr("id")}).get()},this.randerUser=function(e){var n=a(31);e.verifypw=l;var o=n(e);delete e.verifypw,t.$container.html(o);var s=$(e.userRoleList).map(function(e,t){return t.role}).get();this.randerRoleTr(s),new r({url:"/api/security/permission/search",type:"POST",data:JSON.stringify({})}).done(function(e){var a=i.structTreeData(e.result);t.$container.find(".panel-permission .panel-body").MyTree({treeType:"org",showCheck:!1,enableSearch:!1,spread:!1,spreadLevel:0,checkedData:[],data:a})}),this.$header.find(".btn-group").Buttons([{clazz:"btn-primary",glyphicon:"glyphicon-floppy-save",text:"\u4fdd\u5b58",title:"\u4fdd\u5b58\u7528\u6237",callback:function(){t.saveOrUpdateUser(e).done(function(e){t.slipOut(),t.parent.load(CUR_ORG.id)})}}]),t.$container.find(".panel-role .panel-heading .btn-group").Buttons([{clazz:"btn-info",glyphicon:"glyphicon-check",text:"\u89d2\u8272",title:"\u9009\u62e9\u89d2\u8272",callback:function(){var e=t.getRoleIds();a(11).selectPopover({$btn:$(this),checkedArr:e,callback:function(e){t.randerRoleTr(e)}})}}]),t.$container.find("#btn_relate_role").click(function(){e.id?t.relaterole(e):t.saveOrUpdateUser(e).done(function(a){e.id=a.result,t.relaterole(e)})}),t.$container.find("#btn_update_password").click(function(){l?t.verifyAndupdatePassword(e):e.id?t.updatePassword(e):t.saveOrUpdateUser(e).done(function(a){e.id=a.result,t.updatePassword(e)})}),t.slipIn()},this.loadUser=function(e){if(e)new r({url:"/api/security/user/get/"+e,type:"GET"}).done(function(e){t.randerUser(e.result)});else{var a={id:"",account:"",name:"",age:20,organization:window.CUR_ORG};t.randerUser(a)}},this.saveOrUpdateUser=function(e){var t=$.Deferred();return e.account=$("#account").val().trim(),e.name=$("#name").val().trim(),e.age=$("#age").val(),e.account&&new r({url:"/api/security/user/getby/"+e.account,type:"GET"}).done(function(a){a.result&&a.result.id!=e.id?($("#account").parent().addClass("has-error"),o.warning("\u8d26\u53f7\u201c"+e.account+"\u201d\u5df2\u5b58\u5728\uff01"),$("#account").focus()):($("#account").parent().removeClass("has-error"),new r({url:"/api/security/user/saveorupdate",type:"POST",data:JSON.stringify(e)}).done(function(e){t.resolve(e)}).fail(function(){t.reject()}))}).fail(function(){t.reject()}),t.promise()},this.updatePassword=function(e){var t=$("#password").val().trim(),a=$("#repassword").val().trim();return t&&a?t!=a?($("#password").parent().addClass("has-error"),$("#repassword").parent().addClass("has-error"),o.warning("\u65b0\u5bc6\u7801\u4e0e\u786e\u8ba4\u5bc6\u7801\u4e0d\u76f8\u540c\uff01"),$("#repassword").focus(),!1):void new r({url:"/api/security/user/updatepassword",type:"POST",data:JSON.stringify({id:e.id,password:t})}).done(function(e){o.success("\u66f4\u65b0\u5bc6\u7801\u6210\u529f\u3002"),$("#password").parent().removeClass("has-error"),$("#repassword").parent().removeClass("has-error")}):!1},this.relaterole=function(e){var t=[];$(this.getRoleIds()).each(function(e,a){t.push({id:null,role:{id:a}})}),e.userRoleList=t,new r({url:"/api/security/user/relaterole",type:"POST",data:JSON.stringify(e)}).done(function(e){o.success("\u5173\u8054\u89d2\u8272\u6210\u529f\u3002")})},this.verifyAndupdatePassword=function(e){var a=$("#oldpassword").val().trim();return a?void new r({url:"/api/security/user/verify",type:"POST",data:JSON.stringify({account:e.account,password:a})}).done(function(a){a.result?($("#oldpassword").parent().removeClass("has-error"),t.updatePassword(e)):($("#oldpassword").parent().addClass("has-error"),o.warning("\u65e7\u5bc6\u7801\u4e0d\u6b63\u786e\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\uff01"),$("#oldpassword").focus())}):!1},this.loadUser(s)}},function(e,t,a){"use strict";var n=a(5),r=a(9)["default"],o=a(6)["default"],i=a(7),s=a(14),l=function(){var e=new n.HandlebarsEnvironment;return i.extend(e,n),e.SafeString=r,e.Exception=o,e.Utils=i,e.VM=s,e.template=function(t){return s.template(t,e)},e},c=l();c.create=l,t["default"]=c},function(e,t,a){"use strict";function n(e){var t=e&&e[0]||1,a=u;if(t!==a){if(a>t){var n=p[a],r=p[t];throw new d("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+r+").")}throw new d("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function r(e,t){if(!t)throw new d("No environment passed to template");var a=function(e,a,n,r,o,i){var s=t.VM.invokePartial.apply(this,arguments);if(null!=s)return s;if(t.compile){var l={helpers:r,partials:o,data:i};return o[a]=t.compile(e,{data:void 0!==i},t),o[a](n,l)}throw new d("The partial "+a+" could not be compiled when running in runtime-only mode")},n={escapeExpression:c.escapeExpression,invokePartial:a,programs:[],program:function(e,t,a){var n=this.programs[e];return a?n=i(e,t,a):n||(n=this.programs[e]=i(e,t)),n},merge:function(e,t){var a=e||t;return e&&t&&e!==t&&(a={},c.extend(a,t),c.extend(a,e)),a},programWithDepth:t.VM.programWithDepth,noop:t.VM.noop,compilerInfo:null};return function(a,r){r=r||{};var o,i,s=r.partial?r:t;r.partial||(o=r.helpers,i=r.partials);var l=e.call(n,s,a,o,i,r.data);return r.partial||t.VM.checkRevision(n.compilerInfo),l}}function o(e,t,a){var n=Array.prototype.slice.call(arguments,3),r=function(e,r){return r=r||{},t.apply(this,[e,r.data||a].concat(n))};return r.program=e,r.depth=n.length,r}function i(e,t,a){var n=function(e,n){return n=n||{},t(e,n.data||a)};return n.program=e,n.depth=0,n}function s(e,t,a,n,r,o){var i={partial:!0,helpers:n,partials:r,data:o};if(void 0===e)throw new d("The partial "+t+" could not be found");return e instanceof Function?e(a,i):void 0}function l(){return""}var c=a(7),d=a(6)["default"],u=a(5).COMPILER_REVISION,p=a(5).REVISION_CHANGES;t.checkRevision=n,t.template=r,t.programWithDepth=o,t.program=i,t.invokePartial=s,t.noop=l},function(e,t,a){"use strict";window.Layout={Backer:{Type:{NAV:"NAV",CONTENT:"CONTENT"},Stack:new Array,clickFun:function(e){var t=Layout.Backer.Stack.pop();e&&t.callback(),0==Layout.Backer.Stack.length&&$("#btn_nav_back").addClass("invisible")},cleanByType:function(e){Layout.Backer.Stack=$(Layout.Backer.Stack).map(function(t,a){return a.type!=e?a:void 0}).get(),0==Layout.Backer.Stack.length&&$("#btn_nav_back").addClass("invisible")}},Lefter:{minWidth:55,CurrentNav:null,TopperNav:[{title:"\u5bfc\u822a2",icon:"",count:99,permission:!0,link:!0,childNav:[{title:"\u5bfc\u822a21",permission:!0,link:!0,icon:"",count:0,childNav:[],callback:function(){console.log("\u5bfc\u822a21")}},{title:"\u5bfc\u822a22",icon:"",count:0,permission:!0,link:!0,childNav:[],callback:function(){console.log("\u5bfc\u822a22")}}],callback:function(){console.log("\u5bfc\u822a2")}},{title:"\u5bfc\u822a3",icon:"",count:0,permission:!0,link:!0,childNav:[],callback:function(){console.log("\u5bfc\u822a3")}},{title:"\u5bfc\u822a4",icon:"",count:0,permission:!0,link:!0,childNav:[],callback:function(){console.log("\u5bfc\u822a4")}}],BottomerNav:[{title:"\u8bbe\u7f6e",icon:"",count:0,permission:!1,link:!0,childNav:[],callback:function(){console.log("\u8bbe\u7f6e")}},{title:"\u767b\u9646",permission:!1,link:!1,icon:"",count:0,childNav:[],callback:function(){Login()}}],_flatNav:function(e,t){$(e).each(function(e,a){var n=t;return a.path=t+a.title,0==a.childNav.length?a.permission&&!SessionHelper.hasPermission("/\u5bfc\u822a"+a.path)?!0:(null==Layout.Lefter.CurrentNav&&a.link&&(Layout.Lefter.CurrentNav=a),!0):(t=t+a.title+"/",Layout.Lefter._flatNav(a.childNav,t),t=n,void 0)})},_buildNav:function(e,t){e.addClass("out"),setTimeout(function(){e.empty(),$(t).each(function(a,n){if(n.permission&&!SessionHelper.hasPermission("/\u5bfc\u822a"+n.path))return!0;var r=$("<li>").appendTo(e),o=$("<a>").attr("href","#").appendTo(r);n.icon=n.icon.trim()?n.icon:"glyphicon glyphicon-question-sign",$("<span>").addClass(n.icon).addClass("margin-right-15").appendTo(o);var i=$("<span>").addClass("detail").appendTo(o);$("<span>").addClass("title").text(n.title).appendTo(i);var s=$("<span>").addClass("title-ext").appendTo(i),l=$("<span>").addClass("badge").appendTo(s);n.count?l.text(n.count):l.addClass("invisible");var c=$("<span>").addClass("glyphicon glyphicon-chevron-right").appendTo(s);0==n.childNav.length&&c.addClass("invisible"),r.data("data",n),r.click(function(){var a=$(this).data("data");a.childNav.length>0?(Layout.Lefter._buildNav(e,a.childNav),Layout.Backer.Stack.push({callback:function(){Layout.Lefter._buildNav(e,t)},type:Layout.Backer.Type.NAV}),$("#btn_nav_back").removeClass("invisible")):a.link?($(this).hasClass("active")||(Layout.Lefter.CurrentNav=a,$(".layout .layout-lefter .active").removeClass("active"),$(this).addClass("active")),$(".layout-container").removeClass("in out"),setTimeout(function(){$(".layout-container").empty(),Layout.Backer.cleanByType(Layout.Backer.Type.CONTENT),$(".layout-container").addClass("in"),a.callback()},350)):a.callback()}),Layout.Lefter.CurrentNav.path.indexOf(n.path)>=0&&($(".layout .layout-lefter .active").removeClass("active"),r.addClass("active"))}),e.removeClass("out")},350)},buildTopper:function(){Layout.Lefter._flatNav(Layout.Lefter.TopperNav,"/"),Layout.Lefter._buildNav($(".layout .layout-lefter .toper"),Layout.Lefter.TopperNav)},buildBottomer:function(){Layout.Lefter._flatNav(Layout.Lefter.BottomerNav,"/"),Layout.Lefter._buildNav($(".layout .layout-lefter .bottomer"),Layout.Lefter.BottomerNav)},build:function(e){Layout.Backer.cleanByType(Layout.Backer.Type.NAV),e||Layout.Lefter.logined(),Layout.Lefter.buildTopper(),Layout.Lefter.buildBottomer(),e||Layout.Lefter.CurrentNav.callback()},logined:function(){var e=sessionStorage.currentSession;if(e){e=JSON.parse(e);var t=e.CUR_USER;if(t){var a={title:t.name,permission:!1,link:!0,icon:"",count:0,childNav:[{title:"\u4e2a\u4eba\u4fe1\u606f",permission:!1,link:!0,icon:"",count:0,childNav:[],callback:function(){}},{title:"\u6ce8\u9500",icon:"",count:0,permission:!1,link:!1,childNav:[],callback:function(){Logout()}}],callback:function(){}};Layout.Lefter.BottomerNav.splice(1,1,a)}}}}},window.SessionHelper={hasPermission:function(e){var t=sessionStorage.currentSession,a=!1;if(t){t=JSON.parse(t);var n=t.CUR_USER;n&&$(n.permissionPathArr).each(function(t,n){return n.indexOf(e)>=0?(a=!0,!1):void 0})}return a}},window.Login=function(){var e=a(27),t=e();$("#singleModal .modal-content").html(t),$("#singleModal").modal("show"),$("#btn_login").unbind(),$("#btn_login").click(function(){var e=$('#singleModal form input[name="username"]').val().trim(),t=$('#singleModal form input[name="password"]').val().trim();a(10).login({username:e,password:t},function(e){switch(e.code){case 0:$("#singleModal").modal("hide"),Layout.Lefter.logined(),Layout.Lefter.build(!0);break;case-2:a(1).danger(e.message);break;case-20:a(1).danger(e.message);break;case-21:a(1).danger(e.message)}})})},window.Logout=function(){a(10).logout(function(e){switch(e.code){case 0:a(1).success(e.result);var t={title:"\u767b\u9646",permission:!1,link:!1,icon:"",count:0,childNav:[],callback:function(){Login()}};Layout.Lefter.BottomerNav.splice(1,1,t),delete sessionStorage.currentSession,Layout.Lefter.build(!0)}})}},function(e,t){"use strict";!function(e){function t(a,n){var r=this;if(this.buttonDemo={clazz:"btn-info",glyphicon:"glyphicon-question-sign",text:"",title:"",data:{},callback:function(){}},this.buildBtn=function(t){var n=e("<button>").addClass("btn "+t.clazz).attr("title",t.title?t.title:t.text).appendTo(a);return n.append("<span"),e("<span>").addClass("glyphicon "+t.glyphicon).appendTo(n),n.append(t.text),n.data("data",t.data),n.click(t.callback),n},this.buildLi=function(t,a){var n=e("<li>").appendTo(t),r=e('<a href="#">').appendTo(n).attr("title",a.title?a.title:a.text);return e("<span>").addClass("glyphicon "+a.glyphicon).appendTo(r),e("<font>").addClass("add-title").text(" "+a.text).appendTo(r),n.data("data",a.data),n.click(a.callback),n},n instanceof Array)if(n=e(n).map(function(t,a){return e.extend({},r.buttonDemo,a)}).get(),n.length<=t.LENGTH)e(n).each(function(e,t){r.buildBtn(t)});else{var o=e(t.DROPDOWM_UL).appendTo(a);e(n).each(function(e,a){e<t.LENGTH-1?r.buildBtn(a):(r.buildBtn(a).addClass("hidden-xs"),r.buildLi(o,a))}),e(t.DROPDOWM_BTN).appendTo(a)}}e.fn.Buttons=function(a){return this.each(function(){var n=e(this);n.empty(),new t(n,a)})},t.LENGTH=1,t.DROPDOWM_BTN='		<button type="button" class="btn btn-link visible-xs-block dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">			<span class="glyphicon glyphicon-option-vertical"></span>		</button>		',t.DROPDOWM_UL='		<ul class="dropdown-menu pull-right">		</ul>		'}(jQuery)},function(e,t){"use strict";function a(e,t){var a=this;this.defaults={},this.options=$.extend({},this.defaults,t),this.progress=function(e){a._$progressBar.width(e)},this.remove=function(){this._$progressBar.parent().remove()},this.info=function(){this._$progressBar.removeClass("progress-bar-success progress-bar-info progress-bar-warning progress-bar-danger"),this._$progressBar.addClass("progress-bar-info")},this.success=function(){this._$progressBar.removeClass("progress-bar-success progress-bar-info progress-bar-warning progress-bar-danger"),this._$progressBar.addClass("progress-bar-success")},this.warning=function(){this._$progressBar.removeClass("progress-bar-success progress-bar-info progress-bar-warning progress-bar-danger"),this._$progressBar.addClass("progress-bar-warning")},this.danger=function(){this._$progressBar.removeClass("progress-bar-success progress-bar-info progress-bar-warning progress-bar-danger"),this._$progressBar.addClass("progress-bar-danger")},this._$progressBar=$('<div class="progress-bar progress-bar-info progress-bar-striped active" role="progressbar">').appendTo($('<div class="progress loading">').prependTo(e))}!function(e){e.fn.Loading=function(t){return e.fn.progress=function(t,a){var n=e(this).data(t);return n.progress(a)},e.fn.success=function(t){var a=e(this).data(t);return a.success()},e.fn.warning=function(t){var a=e(this).data(t);return a.warning()},e.fn.danger=function(t){var a=e(this).data(t);return a.danger()},e.fn.removeLoading=function(t){var a=e(this).data(t);return e(this).removeData(t),a.remove()},this.each(function(){var n=e(this),r=new a(n,null);n.data(t,r)})}}(jQuery)},function(e,t){"use strict";!function(e){var t=function(e,t){return e<<t|e>>>32-t},a=function(e,t){var a,n,r,o,i;return r=2147483648&e,o=2147483648&t,a=1073741824&e,n=1073741824&t,i=(1073741823&e)+(1073741823&t),a&n?2147483648^i^r^o:a|n?1073741824&i?3221225472^i^r^o:1073741824^i^r^o:i^r^o},n=function(e,t,a){return e&t|~e&a},r=function(e,t,a){return e&a|t&~a},o=function(e,t,a){return e^t^a},i=function(e,t,a){return t^(e|~a)},s=function(e,r,o,i,s,l,c){return e=a(e,a(a(n(r,o,i),s),c)),a(t(e,l),r)},l=function(e,n,o,i,s,l,c){return e=a(e,a(a(r(n,o,i),s),c)),a(t(e,l),n)},c=function(e,n,r,i,s,l,c){return e=a(e,a(a(o(n,r,i),s),c)),a(t(e,l),n)},d=function(e,n,r,o,s,l,c){return e=a(e,a(a(i(n,r,o),s),c)),a(t(e,l),n)},u=function(e){for(var t,a=e.length,n=a+8,r=(n-n%64)/64,o=16*(r+1),i=Array(o-1),s=0,l=0;a>l;)t=(l-l%4)/4,s=l%4*8,i[t]=i[t]|e.charCodeAt(l)<<s,l++;return t=(l-l%4)/4,s=l%4*8,i[t]=i[t]|128<<s,i[o-2]=a<<3,i[o-1]=a>>>29,i},p=function(e){var t,a,n="",r="";for(a=0;3>=a;a++)t=e>>>8*a&255,r="0"+t.toString(16),n+=r.substr(r.length-2,2);return n},h=function(e){e=e.replace(/\x0d\x0a/g,"\n");for(var t="",a=0;a<e.length;a++){var n=e.charCodeAt(a);128>n?t+=String.fromCharCode(n):n>127&&2048>n?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t};e.extend({md5:function(e){var t,n,r,o,i,f,v,g,m,b=Array(),y=7,k=12,$=17,C=22,w=5,x=9,T=14,L=20,S=4,O=11,N=16,R=23,_=6,P=10,A=15,D=21;for(e=h(e),b=u(e),f=1732584193,v=4023233417,g=2562383102,m=271733878,t=0;t<b.length;t+=16)n=f,r=v,o=g,i=m,f=s(f,v,g,m,b[t+0],y,3614090360),m=s(m,f,v,g,b[t+1],k,3905402710),g=s(g,m,f,v,b[t+2],$,606105819),v=s(v,g,m,f,b[t+3],C,3250441966),f=s(f,v,g,m,b[t+4],y,4118548399),m=s(m,f,v,g,b[t+5],k,1200080426),g=s(g,m,f,v,b[t+6],$,2821735955),v=s(v,g,m,f,b[t+7],C,4249261313),f=s(f,v,g,m,b[t+8],y,1770035416),m=s(m,f,v,g,b[t+9],k,2336552879),g=s(g,m,f,v,b[t+10],$,4294925233),v=s(v,g,m,f,b[t+11],C,2304563134),f=s(f,v,g,m,b[t+12],y,1804603682),m=s(m,f,v,g,b[t+13],k,4254626195),g=s(g,m,f,v,b[t+14],$,2792965006),v=s(v,g,m,f,b[t+15],C,1236535329),f=l(f,v,g,m,b[t+1],w,4129170786),m=l(m,f,v,g,b[t+6],x,3225465664),g=l(g,m,f,v,b[t+11],T,643717713),v=l(v,g,m,f,b[t+0],L,3921069994),f=l(f,v,g,m,b[t+5],w,3593408605),m=l(m,f,v,g,b[t+10],x,38016083),g=l(g,m,f,v,b[t+15],T,3634488961),v=l(v,g,m,f,b[t+4],L,3889429448),f=l(f,v,g,m,b[t+9],w,568446438),m=l(m,f,v,g,b[t+14],x,3275163606),g=l(g,m,f,v,b[t+3],T,4107603335),v=l(v,g,m,f,b[t+8],L,1163531501),f=l(f,v,g,m,b[t+13],w,2850285829),m=l(m,f,v,g,b[t+2],x,4243563512),g=l(g,m,f,v,b[t+7],T,1735328473),v=l(v,g,m,f,b[t+12],L,2368359562),f=c(f,v,g,m,b[t+5],S,4294588738),m=c(m,f,v,g,b[t+8],O,2272392833),g=c(g,m,f,v,b[t+11],N,1839030562),v=c(v,g,m,f,b[t+14],R,4259657740),f=c(f,v,g,m,b[t+1],S,2763975236),m=c(m,f,v,g,b[t+4],O,1272893353),g=c(g,m,f,v,b[t+7],N,4139469664),v=c(v,g,m,f,b[t+10],R,3200236656),f=c(f,v,g,m,b[t+13],S,681279174),m=c(m,f,v,g,b[t+0],O,3936430074),g=c(g,m,f,v,b[t+3],N,3572445317),v=c(v,g,m,f,b[t+6],R,76029189),f=c(f,v,g,m,b[t+9],S,3654602809),m=c(m,f,v,g,b[t+12],O,3873151461),g=c(g,m,f,v,b[t+15],N,530742520),v=c(v,g,m,f,b[t+2],R,3299628645),f=d(f,v,g,m,b[t+0],_,4096336452),m=d(m,f,v,g,b[t+7],P,1126891415),g=d(g,m,f,v,b[t+14],A,2878612391),v=d(v,g,m,f,b[t+5],D,4237533241),f=d(f,v,g,m,b[t+12],_,1700485571),m=d(m,f,v,g,b[t+3],P,2399980690),g=d(g,m,f,v,b[t+10],A,4293915773),v=d(v,g,m,f,b[t+1],D,2240044497),f=d(f,v,g,m,b[t+8],_,1873313359),m=d(m,f,v,g,b[t+15],P,4264355552),g=d(g,m,f,v,b[t+6],A,2734768916),v=d(v,g,m,f,b[t+13],D,1309151649),f=d(f,v,g,m,b[t+4],_,4149444226),m=d(m,f,v,g,b[t+11],P,3174756917),g=d(g,m,f,v,b[t+2],A,718787259),v=d(v,g,m,f,b[t+9],D,3951481745),f=a(f,n),v=a(v,r),g=a(g,o),m=a(m,i);var I=p(f)+p(v)+p(g)+p(m);return I.toLowerCase()}})}(jQuery)},function(e,t,a){"use strict";!function(e){function t(t,n){var r={showCheck:!0,checkedArr:[],callback:function(e){}};this.options=e.extend({},r,n);var o=this,i=a(29),s=i(this.options);t.attr("data-content",s),t.popover({html:!0,placement:"left",trigger:"manual"}),t.on("hidden.bs.popover",function(){e(this).popover("destroy")}),t.on("shown.bs.popover",function(){var n=t.data("bs.popover"),r=n.$tip,i=r.find(".popover-content-content");e([document.body,window]).on("mousedown.popover",function c(){t.popover("destroy"),e([document.body,window]).off("mousedown.popover",c)}),e(".popover").on("mousedown.popover",function(e){e.stopPropagation();
});var s=e('<button type="button" class="close" aria-label="Close"><span aria-hidden="true">\xd7</span></button>').appendTo(r.find(".popover-title"));if(s.click(function(){n.destroy()}),o.options.showCheck){var l=r.find(".popover-content-footer .btn-check");l.click(function(){var t=e(this).find(".glyphicon");t.hasClass("glyphicon-unchecked")?(t.removeClass("glyphicon-unchecked"),t.addClass("glyphicon-check"),i.find("li .glyphicon").removeClass("glyphicon-unchecked glyphicon-check").addClass("glyphicon-check")):(t.removeClass("glyphicon-check"),t.addClass("glyphicon-unchecked"),i.find("li .glyphicon").removeClass("glyphicon-unchecked glyphicon-check").addClass("glyphicon-unchecked"))})}n.defaultRender=function(t){var n=a(28),r={data:t,showCheck:o.options.showCheck,checkedArr:o.options.checkedArr},s={helpers:{isExist:function(e,t,a){for(var n in t)if(e==t[n])return a.fn(this);return a.inverse(this)}}},l=n(r,s);i.append(l),i.find("li").click(function(){if(i.find("li").removeClass("active"),e(this).addClass("active"),o.options.showCheck){var t=e(this).find(".glyphicon");t.hasClass("glyphicon-unchecked")?(t.removeClass("glyphicon-unchecked"),t.addClass("glyphicon-check")):(t.removeClass("glyphicon-check"),t.addClass("glyphicon-unchecked"))}})},n.defaultGetData=function(){function t(e){return{id:e.attr("id"),name:e.text()}}return o.options.showCheck?i.find(".glyphicon-check").map(function(){var a=e(this).parent();return t(a)}).get():i.find(".active").length>0?t(i.find(".active")):null},o.options.callback&&o.options.callback(n)}),t.popover("toggle")}e.fn.MyPopover=function(a){return this.each(function(){new t(e(this),a)})}}(jQuery)},function(e,t){"use strict";function a(e,t){this.defaults={treeType:"org",showCheck:!1,enableSearch:!1,spread:!1,spreadLevel:0,checkedData:[],data:[{text:"\u7ec4\u7ec7\u673a\u6784",checkState:!1,checkable:!0,complete:!1,hasChild:!0,icon:"fa fa-sitemap",originalData:{organizationID:"",organizationName:"\u7ec4\u7ec7\u673a\u6784"},data:[]}]},this.options=$.extend({},this.defaults,t),this.init=function(){var t=this;e.empty();var a=$("<div>").addClass("abs-tree").appendTo(e);t.options.enableSearch&&t.initSearch(a);var n=$("<ol>").appendTo(a);t.appendChild(n,this.options.data)},this.initSearch=function(t){var a=this;t.scroll(function(){this.scrollTop>=e.find(".abs-tree-search").get(0).offsetHeight?e.find(".abs-tree-search").css("top",this.scrollTop+"px"):e.find(".abs-tree-search").css("top","0px")});var n=$("<div>").addClass("abs-tree-search input-group").appendTo(t);$('<input type="text" placeholder="\u8bf7\u8f93\u5165\u5b9a\u4f4d\u5173\u952e\u5b57" class="form-control input-sm">').appendTo(n),$('<span class="input-group-btn" style="z-index: 2;">				<button type="button" class="btn btn-default btn-sm" title="\u8f85\u52a9\u5b9a\u4f4d">				<span class="fa fa-crosshairs"></span>				</button>				</span>').appendTo(n),n.find("input").keydown(function(e){return this==e.target&&13==e.keyCode?(a.localSearch(),!1):void 0}),n.find("button").click(function(){a.localSearch()})},this.appendChild=function(e,t){var a,n=this,r=e.data("data");r?(r.complete=!0,e.data("data",r),a=e.next()):a=e,t.sort(function(e,t){return e.text.localeCompare(t.text)}),$(t).each(function(e,r){var o=n.renderItem(r).appendTo(a);if(n.options.showCheck&&e==t.length-1&&n.checkParent(o),n.options.spread){var i=o.find(".btn-collapse");(0==n.options.spreadLevel||i.parents("ol").length<=n.options.spreadLevel)&&i.click()}var s=$("<ol>").appendTo(a);r.data&&n.appendChild(s,r.data)}),r&&(a.find("li").length>0?n.collapseClass(e.find(".btn-collapse"),"minus"):n.collapseClass(e.find(".btn-collapse"),"blank"))},this.renderItem=function(e){var t=this,a=$("<li>").data("data",e);a.click(function(){t.liClick($(this))}).dblclick(function(e){e.preventDefault(),e.stopPropagation(),t.collapseClick($(this).find(".btn-collapse"))});var n=$('<i class="fa fa-blank btn-collapse">').appendTo(a).click(function(e){e.preventDefault(),e.stopPropagation(),t.collapseClick($(this))});if(e.hasChild&&t.collapseClass(n,"plus"),e.data.length>0&&t.collapseClass(n,"minus"),t.options.showCheck){var r=$('<i class="fa checkbox">').appendTo(a);e.checkState?r.addClass("fa-check-square-o"):r.addClass("fa-square-o"),r.click(function(){t.checkClick($(this).parent())})}return $('<i class="'+e.icon+'">').appendTo(a),$("<font>").html(e.text).appendTo(a),a},this.checkClick=function(e){var t=this;t.checkboxControl(e)},this.liClick=function(t){t.is(".active")?t.removeClass("active"):(e.find(".abs-tree > ol").find("li.active").removeClass("active"),t.addClass("active"))},this.localSearchResult={value:"",index:0,liIndexArr:[]},this.localSearch=function(){var t=this,a=e.find(".abs-tree-search").find("input").val().trim();""!=a&&(a!=t.localSearchResult.value?(t.localSearchResult.value=a,t.localSearchResult.index=0,t.localSearchResult.liIndexArr=[],e.find(".abs-tree > ol").find("li:visible").each(function(e,n){var r=$(this).text();r.indexOf(a)>=0&&t.localSearchResult.liIndexArr.push(e)}),t.localSearchResult.liIndexArr.length>0&&t.scrollToLi(t.localSearchResult.liIndexArr[t.localSearchResult.index])):t.localSearchResult.liIndexArr.length>0&&(t.localSearchResult.index=t.localSearchResult.index+1,t.localSearchResult.index>=t.localSearchResult.liIndexArr.length&&(t.localSearchResult.index=0),t.scrollToLi(t.localSearchResult.liIndexArr[t.localSearchResult.index])))},this.scrollToLi=function(t){var a=e.find(".abs-tree"),n=$(e.find(".abs-tree > ol").find("li:visible")[t]);e.find(".abs-tree > ol").find("li.active").removeClass("active"),n.addClass("active"),e.find(".abs-tree").animate({scrollTop:n.offset().top-a.offset().top+a.scrollTop()-e.find(".abs-tree-search").get(0).offsetHeight})},this.checkboxControl=function(e){if(e.find(".checkbox").hasClass("fa-square-o")||e.find(".checkbox").hasClass("fa-dot-circle-o")){e.find(".checkbox").removeClass("fa-square-o fa-check-square-o fa-dot-circle-o").addClass("fa-check-square-o");var t=e.next();t.find(".checkbox").removeClass("fa-square-o fa-check-square-o fa-dot-circle-o").addClass("fa-check-square-o")}else{e.find(".checkbox").removeClass("fa-square-o fa-check-square-o fa-dot-circle-o").addClass("fa-square-o");var t=e.next();t.find(".checkbox").removeClass("fa-square-o fa-check-square-o fa-dot-circle-o").addClass("fa-square-o")}this.checkParent(e)},this.checkParent=function(e){function t(e){var t=e.parent(),a=t.children("li").length,n=t.children("li").find(".fa-check-square-o").length,r=t.children("li").find(".fa-square-o").length;return a-n==0?1:a-r==0?-1:0}var a=e.parent().prev();if(a.length>0){switch(t(e)){case 1:a.find(".checkbox").removeClass("fa-square-o fa-check-square-o fa-dot-circle-o").addClass("fa-check-square-o");break;case-1:a.find(".checkbox").removeClass("fa-square-o fa-check-square-o fa-dot-circle-o").addClass("fa-square-o");break;default:a.find(".checkbox").removeClass("fa-square-o fa-check-square-o fa-dot-circle-o").addClass("fa-dot-circle-o")}this.checkParent(e.parent())}},this.collapseClick=function(e){var t=this,a=e.closest("li").data("data");if(a.complete){if(e.hasClass("fa-blank"))return;e.hasClass("fa-minus-square-o")?(e.closest("li").next().hide(),t.collapseClass(e,"plus")):e.hasClass("fa-plus-square-o")&&(e.closest("li").next().show(),t.collapseClass(e,"minus"))}else"undefined"==typeof t.load?console.error("\u672a\u52a0\u8f7d\u8fc7\u8282\u70b9\uff08complete=false\uff09\uff0c\u9700\u8981\u63d0\u4f9bload\u51fd\u6570\uff01"):t.load(e.closest("li"))},this.collapseClass=function(e,t){switch(e.removeClass("fa-plus-square-o fa-minus-square-o fa-spinner fa-spin fa-ban fa-blank"),t){case"plus":e.addClass("fa-plus-square-o");break;case"minus":e.addClass("fa-minus-square-o");break;case"blank":e.addClass("fa-blank");break;case"loading":e.addClass("fa-spinner").addClass("fa-spin");break;case"error":e.addClass("fa-ban")}},this.getCheckedData=function(){var t=this,a=new Array;return t.options.showCheck?e.find(".fa-check-square-o").each(function(){$(this).parent().data("data").checkable&&a.push($(this).parent().data("data"))}):a.push(e.find(".active").data("data")),a},this.init()}function n(e,t){this.load=function(e){var t=this;t.collapseClass(e.find(".btn-collapse"),"loading");var a=!1;"user"==t.options.treeType&&(a=!0);var n={orgID:e.data("data").originalData.organizationID,flag:a};Proxy.getChildrenOrgAndUser(n,function(a){if(0!==a.code)t.collapseClass(e.find(".btn-collapse"),"error");else{var n=a.result.organizationList,r=new Array;if($(n).each(function(e,a){a=t.renderData(a),r.push(a)}),t.appendChild(e,r),"user"==t.options.treeType){var o=a.result.userList,i=new Array;$(o).each(function(a,n){n.orgId=e.data("data").value,n.orgName=e.data("data").text,n=t.renderUserData(n),i.push(n)}),t.appendChild(e,i)}}})},this.renderData=function(e){var t=this,a=!0,n=!1,r=!0,o=!1,i="fa ";return $(t.options.checkedData).each(function(t,a){return a==e.organizationID?void(o=!0):void 0}),"\u7528\u6237\u7ec4"==e.organizationType?i+="fa-group":"\u680f\u76ee"==e.organizationType?(i+="fa-columns",a=!1,n=!0):i+="fa-sitemap","user"==t.options.treeType&&(a=!0,n=!1,r=!1),{text:e.organizationName,checkState:o,checkable:r,complete:n,hasChild:a,icon:i,originalData:e}},this.renderUserData=function(e){var t=this,a=!1;return $(t.options.checkedData).each(function(t,n){return n==e.userID?void(a=!0):void 0}),{text:e.userName,checkState:a,checkable:!0,complete:!0,hasChild:!1,icon:"fa fa-user",originalData:e}},a.apply(this,arguments)}!function(e){jQuery.fn.MyTree=function(t){return jQuery.fn.getCheckedData=function(){var t=e(this).data("myTree");return t.getCheckedData()},this.each(function(){var a=e(this),r=null;switch(t.treeType){case"org":r=new n(a,t);break;default:r=new n(a,t)}a.data("myTree",r)})}}(jQuery)},function(e,t){"use strict";+function(e){jQuery.fn.getUID=function(t){var a=e(this);do t+=~~(1e6*Math.random());while(a.data(t));return t}}(jQuery),+function(){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");Math.uuid=function(t,a){var n,r=e,o=[];if(a=a||r.length,t)for(n=0;t>n;n++)o[n]=r[0|Math.random()*a];else{var i;for(o[8]=o[13]=o[18]=o[23]="-",o[14]="4",n=0;36>n;n++)o[n]||(i=0|16*Math.random(),o[n]=r[19==n?3&i|8:i])}return o.join("")}}(),+function(){var e={},t=navigator.userAgent.toLowerCase();console.log(t);var a;(a=t.match(/msie ([\d.]+)/))?e.ie=a[1]:"Do nothing",(a=t.match(/firefox\/([\d.]+)/))?e.firefox=a[1]:"Do nothing",(a=t.match(/chrome\/([\d.]+)/))?e.chrome=a[1]:"Do nothing",(a=t.match(/edge\/([\d.]+)/))?e.edge=a[1]:"Do nothing",(a=t.match(/safari\/([\d.]+)/))?e.safari=a[1]:(a=t.match(/version\/([\d.]+).*safari/))?e.safari=a[1]:"Do nothing",(a=t.match(/opera.([\d.]+)/))?e.opera=a[1]:"Do nothing",e.ie&&console.log("IE: "+e.ie),e.firefox&&console.log("Firefox: "+e.firefox),e.chrome&&console.log("Chrome: "+e.chrome),e.edge&&console.log("Edge: "+e.edge),e.opera&&console.log("Opera: "+e.opera),e.safari&&console.log("Safari: "+e.safari),window.browser=e}()},function(e,t,a){"use strict";a(15),a(23),$(function(){Layout.Lefter.build(!1),$("#btn_layout").click(function(e){$(".layout").hasClass("in")||$(".layout").hasClass("out")?$(".layout").hasClass("in")?($(".layout").removeClass("in"),$(".layout").addClass("out")):($(".layout").removeClass("out"),$(".layout").addClass("in")):$(window).width()>=768?$(".layout").addClass("out"):$(".layout").addClass("in")}),$("#btn_nav_back").click(function(){Layout.Backer.clickFun(!0)}),console.log($(window).width())})},function(e,t,a){"use strict";var n={title:"\u7cfb\u7edf\u7ba1\u7406",icon:"",count:0,permission:!0,link:!0,childNav:[{title:"\u90e8\u95e8\u7ba1\u7406",icon:"",count:0,permission:!0,link:!0,childNav:[],callback:function(){var e=a(24),t=new e({hasHeader:!0,hasTitle:!1,hasBtnGroup:!1});t.$content.addClass("organization"),t.init(),t.load(1)}}],callback:function(){console.log("\u5bfc\u822a1")}};window.Layout.Lefter.TopperNav.push(n)},function(e,t,a){"use strict";function n(e){function t(e){for(var t in e)o=o.replace("${"+t+"}",e[t]?e[t]:"");r.$container.html(o),$("#orgInputName").change(function(){var e=$("#orgInputFullPath").val().split("/");e[e.length-1]=$(this).val(),$("#orgInputFullPath").val(e.join("/"))}),r.slipIn()}var r=this,o=n.DEMO;a(8).apply(this,arguments),this.$header.find(".btn-group").Buttons([{clazz:"btn-primary",glyphicon:"glyphicon-floppy-save",text:"\u4fdd\u5b58",title:"\u4fdd\u5b58\u90e8\u95e8",callback:function(){r.saveOrUpdate()}}]);var i="\u65b0\u589e";if(e.id&&(i="\u7f16\u8f91"),this.$header.find(".title").text(i+"\u90e8\u95e8"),e.id)a(3).getOrg(e.id,function(e){var a=e.result;t(a)});else{var s={name:"",fullPath:CUR_ORG.fullPath+"/"};t(s)}this.saveOrUpdate=function(){var e={id:r.options.id?r.options.id:"",name:$("#orgInputName").val().trim(),parentOrg:{id:CUR_ORG.id}};a(3).saveOrUpdateOrg(e,function(e){r.slipOut(),r.parent.load(CUR_ORG.id)})}}a(16);var r=a(1);window.CUR_ORG=null,e.exports=function(e){a(8).apply(this,arguments),this.$nav=null,this.$orgPanel=null,this.$userPanel=null,this.panelDemo='<div class="panel panel-light panel-default"><div class="panel-heading"><h3 class="panel-title"></h3><div class="btn-group  btn-group-sm pull-right"></div></div><table class="table table-hover"><tbody></tbody></table></div>',this.init=function(){var e=$('<div class="row"></div>').appendTo(this.$container);this.$nav=$('<ol class="breadcrumb org">').appendTo(this.$header),this.$orgPanel=$(this.panelDemo).addClass("panel-org").appendTo($('<div class="col-md-5"></div>').appendTo(e)),this.$orgPanel.find(".panel-title").text("\u90e8\u95e8"),this.$orgPanel.find(".btn-group").Buttons([{clazz:"btn-info",glyphicon:"glyphicon-plus",text:"\u90e8\u95e8",title:"\u65b0\u589e\u5b50\u90e8\u95e8",data:{},callback:function(){new n({hasHeader:!0,hasTitle:!0,hasBtnGroup:!0})}}]),this.$userPanel=$(this.panelDemo).addClass("panel-user").appendTo($('<div class="col-md-7"></div>').appendTo(e)),this.$userPanel.find(".panel-title").text("\u7528\u6237"),this.$userPanel.find(".btn-group").Buttons([{clazz:"btn-info",glyphicon:"glyphicon-plus",text:"\u7528\u6237",title:"\u65b0\u589e\u7528\u6237",data:{},callback:function(){var e=a(12);new e({hasHeader:!0,hasTitle:!0,hasBtnGroup:!0})}}])},this.load=function(e){var t=this;a(3).getOrg(e,function(e){var a=e.result;t.buildNav(a),t.buildOrg(a.childOrgList),t.buildUser(a.userList),CUR_ORG=a})},this.buildNav=function(e){var t=this;if(this.$nav.find("#"+e.id).length>0)this.$nav.find("#"+e.id).nextAll().remove();else{var a=$('<li id="'+e.id+'"><a href="#">'+e.name+"</a></li>").appendTo(this.$nav);a.click(function(){var e=$(this).attr("id");t.load(e)})}},this.buildOrg=function(e){var t=this,o=this.$orgPanel.find("tbody").empty();return 0==e.length?void $("<tr><td>\u65e0\u6570\u636e</td></tr>").appendTo(o):($(e).each(function(e,t){var i=$('<tr><td><a href="#" id="'+t.id+'">'+t.name+'</a></td><td><div class="btn-group  btn-group-xs pull-right"></div></td></tr>').appendTo(o);i.find(".btn-group").Buttons([{clazz:"btn-info",glyphicon:"glyphicon-edit",text:"\u90e8\u95e8",title:"\u4fee\u6539\u90e8\u95e8",data:{id:t.id},callback:function(){new n({hasHeader:!0,hasTitle:!0,hasBtnGroup:!0,id:$(this).data("data").id})}},{clazz:"btn-danger",glyphicon:"glyphicon-remove",text:"\u90e8\u95e8",title:"\u5220\u9664\u90e8\u95e8",data:t,callback:function(){var e=$(this),t=e.data("data").id,n=e.data("data").name;r.confirm({selfClosing:!1,text:"\u786e\u5b9a\u5220\u9664\u201c"+n+"\u201d\u5417\uff1f",help:"\u5220\u9664\u4f1a\u5c06\u8be5\u90e8\u95e8\u4e0b\u7684\u6240\u6709\u5b50\u90e8\u95e8\u548c\u7528\u6237\u4e00\u8d77\u5220\u9664\u3002",callback:function(){a(3).deleteOrg(t,function(t){e.closest("tr").remove()})}})}}])}),void o.find("a[id]").click(function(){var e=$(this).attr("id");t.load(e)}))},this.buildUser=function(e){var t=this.$userPanel.find("tbody").empty();return 0==e.length?void $("<tr><td>\u65e0\u6570\u636e</td></tr>").appendTo(t):void $(e).each(function(e,n){var o=$(n.userRoleList).map(function(e,t){return 3>e?t.role.name:void 0}).get().join(",");n.userRoleList.length>3&&(o+="\u2026");var i=$('<tr><td><a href="#" id="'+n.id+'">'+n.account+"</a></td><td>"+n.name+'</td><td class="hidden-xs">'+n.age+'</td><td class="hidden-xs">'+o+'</td><td><div class="btn-group  btn-group-xs pull-right"></div></td></tr>').appendTo(t);i.find(".btn-group").Buttons([{clazz:"btn-info",glyphicon:"glyphicon-edit",text:"\u7528\u6237",title:"\u4fee\u6539\u7528\u6237",data:{id:n.id},callback:function(){var e=a(12);new e({hasHeader:!0,hasTitle:!0,hasBtnGroup:!0,id:$(this).data("data").id,verifypw:!0})}},{clazz:"btn-danger",glyphicon:"glyphicon-remove",text:"\u7528\u6237",title:"\u5220\u9664\u7528\u6237",data:n,callback:function(){var e=$(this),t=e.data("data").id,n=e.data("data").name;r.confirm({selfClosing:!1,text:"\u786e\u5b9a\u5220\u9664\u201c"+n+"\u201d\u5417\uff1f",help:"\u5220\u9664\u540e\u4e0d\u53ef\u6062\u590d\u3002",callback:function(){a(3).deleteUser(t,function(t){e.closest("tr").remove()})}})}}])})}},n.DEMO='	<form>	  <div class="form-group">		<label for="orgInputName">\u90e8\u95e8\u540d\u79f0</label>		<input type="text" class="form-control" id="orgInputName" placeholder="\u540d\u79f0" value="${name}">		</div>		<div class="form-group">		<label for="orgInputFullPath">\u5168\u8def\u5f84</label>		<input type="text" readonly class="form-control" id="orgInputFullPath" placeholder="\u5168\u8def\u5f84" value="${fullPath}">		</div>	</form>'},function(e,t){"use strict";function a(){this.root=[{text:"\u6743\u9650\u63a7\u5236",checkState:!1,checkable:!1,complete:!0,hasChild:!1,icon:"fa fa-shield",originalData:{id:"",path:""},data:[]}]}a.prototype.renderData=function(e,t){var a="";a="^"+e.originalData.path.replace(new RegExp("/","g"),"/")+"/[^/]*";for(var n=new RegExp(a),r=new Array,o="",i=0;i<t.length;i++)if(n.test(t[i].path)){var s=n.exec(t[i].path)[0],l=s.split("/"),c={text:l[l.length-1],checkState:!1,checkable:!1,complete:!0,hasChild:!1,icon:"fa fa-shield",originalData:{id:t[i].id,path:s},data:[]};s==t[i].path&&(c.checkable=!0,c.icon="fa fa-key",t.splice(i,1),i--),o!=s&&(r.push(c),o=s)}r.length>0&&(e.hasChild=!0,e.data=r);for(var i in r)this.renderData(r[i],t)},a.structTreeData=function(e){e.sort(function(e,t){return e.path.localeCompare(t.path)});var t=new a;return t.renderData(t.root[0],e),t.root},e.exports=a},,function(e,t,a){var n=a(2);e.exports=(n["default"]||n).template(function(e,t,a,n,r){return this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,e.helpers),r=r||{},'<div class="modal-header">\r\n	<button type="button" class="close" data-dismiss="modal" aria-label="Close">\r\n		<span aria-hidden="true">&times;</span>\r\n	</button>\r\n	<h4 class="modal-title" id="exampleModalLabel">\u8bf7\u767b\u5f55</h4>\r\n</div>\r\n<div class="modal-body">\r\n	<form>\r\n		<div class="form-group">\r\n			<input type="text" class="form-control" name="username" placeholder="\u8d26\u53f7">\r\n			<span class="help-block"></span>\r\n		</div>\r\n		<div class="form-group">\r\n			<input type="password" class="form-control" name="password" placeholder="\u5bc6\u7801">\r\n		</div>\r\n	</form>\r\n</div>\r\n<div class="modal-footer">\r\n	<button type="button" class="btn btn-default" data-dismiss="modal">\u53d6\u6d88</button>\r\n	<button type="button" class="btn btn-primary" id="btn_login">\u767b\u9646</button>\r\n</div>\r\n'})},function(e,t,a){var n=a(2);e.exports=(n["default"]||n).template(function(e,t,a,n,r){function o(e,t,n){var r,o,s="";return s+="\r\n	<li id=",(o=a.id)?r=o.call(e,{hash:{},data:t}):(o=e&&e.id,r=typeof o===h?o.call(e,{hash:{},data:t}):o),s+=f(r)+">",r=a["if"].call(e,n&&n.showCheck,{hash:{},inverse:u.noop,fn:u.programWithDepth(2,i,t,n),data:t}),(r||0===r)&&(s+=r),s+="</span>",(o=a.name)?r=o.call(e,{hash:{},data:t}):(o=e&&e.name,r=typeof o===h?o.call(e,{hash:{},data:t}):o),s+=f(r)+"</li>\r\n	"}function i(e,t,n){var r,o,i,c="";return c+='<span class="glyphicon ',o=a.isExist||e&&e.isExist,i={hash:{},inverse:u.program(5,l,t),fn:u.program(3,s,t),data:t},r=o?o.call(e,e&&e.id,n&&n.checkedArr,i):p.call(e,"isExist",e&&e.id,n&&n.checkedArr,i),(r||0===r)&&(c+=r),c+='">'}function s(e,t){return" glyphicon-check "}function l(e,t){return" glyphicon-unchecked "}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,e.helpers),r=r||{};var c,d="",u=this,p=a.helperMissing,h="function",f=this.escapeExpression;return d+='<ul class="list-unstyled">\r\n	',c=a.each.call(t,t&&t.data,{hash:{},inverse:u.noop,fn:u.programWithDepth(1,o,r,t),data:r}),(c||0===c)&&(d+=c),d+="\r\n</ul>"})},function(e,t,a){var n=a(2);e.exports=(n["default"]||n).template(function(e,t,a,n,r){function o(e,t){return'<button class="btn btn-link btn-sm btn-check" title="\u5168\u9009"><span class="glyphicon glyphicon-unchecked"></span>\u5168\u9009</button>'}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,e.helpers),r=r||{};var i,s="",l=this;return s+='<div class="popover-content-content">\r\n</div>\r\n<div class="popover-content-footer">\r\n	',i=a["if"].call(t,t&&t.showCheck,{hash:{},inverse:l.noop,fn:l.program(1,o,r),data:r}),(i||0===i)&&(s+=i),s+='		\r\n	<button class="btn btn-success btn-sm pull-right btn-ok" title="\u786e\u5b9a"><span class="glyphicon glyphicon-ok"></span>\u786e\u5b9a</button>\r\n</div>'})},function(e,t,a){var n=a(2);e.exports=(n["default"]||n).template(function(e,t,a,n,r){function o(e,t){var n,r,o="";return o+='\r\n<tr><td><a href="#" id="',(r=a.id)?n=r.call(e,{hash:{},data:t}):(r=e&&e.id,n=typeof r===s?r.call(e,{hash:{},data:t}):r),o+=l(n)+'">',(r=a.name)?n=r.call(e,{hash:{},data:t}):(r=e&&e.name,n=typeof r===s?r.call(e,{hash:{},data:t}):r),o+=l(n)+'</a></td><td><div class="btn-group btn-group-xs pull-right"></div></td></tr>\r\n'}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,e.helpers),r=r||{};var i,s="function",l=this.escapeExpression,c=this;return i=a.each.call(t,t&&t.data,{hash:{},inverse:c.noop,fn:c.program(1,o,r),data:r}),i||0===i?i:""})},function(e,t,a){var n=a(2);e.exports=(n["default"]||n).template(function(e,t,a,n,r){function o(e,t){return" readonly "}function i(e,t){return'\r\n			  <div class="form-group">\r\n			    <label for="oldpassword">\u65e7\u5bc6\u7801</label>\r\n			    <input type="password" class="form-control" id="oldpassword" placeholder="">\r\n			  </div>\r\n			 '}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,e.helpers),r=r||{};var s,l,c="",d="function",u=this.escapeExpression,p=this;return c+='<div class="row">\r\n	<div class="col-md-7">\r\n		<div class="panel panel-light panel-default">\r\n			<div class="panel-heading">\r\n				<h3 class="panel-title">\u57fa\u672c\u4fe1\u606f</h3>\r\n			</div>\r\n			<div class="panel-body">\r\n		    <form>\r\n			  <div class="form-group">\r\n			    <label for="account">\u8d26\u53f7</label>\r\n			    <input type="text" class="form-control" id="account" value="',(l=a.account)?s=l.call(t,{hash:{},data:r}):(l=t&&t.account,s=typeof l===d?l.call(t,{hash:{},data:r}):l),c+=u(s)+'" placeholder="\u8d26\u53f7" ',s=a["if"].call(t,t&&t.id,{hash:{},inverse:p.noop,fn:p.program(1,o,r),data:r}),(s||0===s)&&(c+=s),c+='>\r\n			  </div>\r\n			  <div class="form-group">\r\n			    <label for="name">\u59d3\u540d</label>\r\n			    <input type="text" class="form-control" id="name" value="',(l=a.name)?s=l.call(t,{hash:{},data:r}):(l=t&&t.name,s=typeof l===d?l.call(t,{hash:{},data:r}):l),c+=u(s)+'" placeholder="\u59d3\u540d">\r\n			  </div>\r\n			  <div class="form-group">\r\n			    <label for="age">\u5e74\u9f84</label>\r\n			    <input type="number" class="form-control" id="age" value="',(l=a.age)?s=l.call(t,{hash:{},data:r}):(l=t&&t.age,s=typeof l===d?l.call(t,{hash:{},data:r}):l),c+=u(s)+'" placeholder="20">\r\n			  </div>\r\n			  <div class="form-group">\r\n			    <label for="org">\u90e8\u95e8</label>\r\n			    <input type="text" class="form-control" id="org" value="'+u((s=t&&t.organization,s=null==s||s===!1?s:s.fullPath,typeof s===d?s.apply(t):s))+'" placeholder="\u90e8\u95e8\u5168\u8def\u5f84" readonly>\r\n			  </div>\r\n			</form>\r\n		  </div>\r\n		</div>\r\n		<div class="panel panel-light panel-warning panel-role">\r\n			<div class="panel-heading">\r\n				<h3 class="panel-title">\u89d2\u8272</h3><div class="btn-group  btn-group-sm pull-right"></div>\r\n			</div>\r\n			<table class="table table-hover">\r\n			<tbody>\r\n			\r\n			</tbody></table>\r\n		  <div class="panel-footer">\r\n				<div class="btn-group btn-group-sm"><button class="btn btn-warning" id="btn_relate_role" title="\u66f4\u65b0\u89d2\u8272"><span class="glyphicon glyphicon-floppy-save"></span>\u89d2\u8272</button></div><h3 class="panel-title">&nbsp;</h3>\r\n		  </div>\r\n		</div>\r\n		<div class="panel panel-light panel-danger panel-password">\r\n			<div class="panel-heading">\r\n				<h3 class="panel-title">\u5bc6\u7801</h3>\r\n			</div>\r\n			<div class="panel-body">\r\n			',s=a["if"].call(t,t&&t.verifypw,{hash:{},inverse:p.noop,fn:p.program(3,i,r),data:r}),(s||0===s)&&(c+=s),c+='\r\n			  <div class="form-group">\r\n			    <label for="password">\u65b0\u5bc6\u7801</label>\r\n			    <input type="password" class="form-control" id="password" placeholder="">\r\n			  </div>\r\n			  \r\n			  <div class="form-group">\r\n			    <label for="repassword">\u786e\u8ba4\u5bc6\u7801</label>\r\n			    <input type="password" class="form-control" id="repassword" placeholder="">\r\n			  </div>\r\n		  </div>\r\n			<div class="panel-footer">\r\n				<div class="btn-group btn-group-sm"><button class="btn btn-danger" id="btn_update_password" title="\u66f4\u65b0\u5bc6\u7801"><span class="glyphicon glyphicon-floppy-save"></span>\u5bc6\u7801</button></div><h3 class="panel-title">&nbsp;</h3>\r\n		  </div>\r\n		</div>\r\n	</div>\r\n	<div class="col-md-5">\r\n		<div class="panel panel-light panel-info panel-permission">\r\n			<div class="panel-heading">\r\n				<h3 class="panel-title">\u6743\u9650</h3>\r\n			</div>\r\n			<div class="panel-body">\r\n		  </div>\r\n		</div>\r\n	</div>\r\n</div>\r\n'})}]);
//# sourceMappingURL=index.js.map